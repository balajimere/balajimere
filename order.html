<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Orders</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
header{background:#03A64A;color:#fff;padding:14px;text-align:center}
.card{background:#fff;margin:10px;padding:10px;border-radius:10px}
</style>
</head>

<body>

<header>My Orders</header>
<div id="orders"></div>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyCt99elKr4T1OJihGpQ6t2luYmCmEBJeo0",
 authDomain:"balajimere-c8eb9.firebaseapp.com",
 projectId:"balajimere-c8eb9"
});
const db=firebase.firestore();

let user=JSON.parse(localStorage.getItem("user"));

db.collection("orders")
.where("mobile","==",user.mobile)
.orderBy("time","desc")
.onSnapshot(s=>{
 orders.innerHTML="";
 s.forEach(d=>{
  let o=d.data();
  orders.innerHTML+=`
  <div class="card">
   <b>${o.product}</b><br>
   â‚¹${o.price}<br>
   ${new Date(o.time.seconds*1000).toLocaleString()}
  </div>`;
 });
});
</script>

</body>
</html>
