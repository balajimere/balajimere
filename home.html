<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Shree Balaji Oil Agency</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
header{background:#03A64A;color:#fff;padding:14px;text-align:center;font-size:20px}
.products{padding:10px}
.card{background:#fff;border-radius:12px;padding:10px;margin-bottom:12px}
.card img{width:100%;border-radius:10px}
.price{color:#03A64A;font-weight:bold}
button{width:100%;padding:10px;border:none;border-radius:8px;background:#03A64A;color:#fff;margin-top:6px}
.bottom{position:fixed;bottom:0;left:0;right:0;background:#fff;display:flex;border-top:1px solid #ccc}
.bottom button{flex:1;border-radius:0}
</style>
</head>

<body>

<header>Shree Balaji Oil Agency</header>

<div class="products" id="products"></div>

<div class="bottom">
<button onclick="location.href='cart.html'">ðŸ›’ Cart</button>
<button onclick="location.href='order.html'">ðŸ“¦ My Orders</button>
</div>

<script>
firebase.initializeApp({
 apiKey:"AIzaSyCt99elKr4T1OJihGpQ6t2luYmCmEBJeo0",
 authDomain:"balajimere-c8eb9.firebaseapp.com",
 projectId:"balajimere-c8eb9"
});
const db=firebase.firestore();

let user=JSON.parse(localStorage.getItem("user")||"null");
if(!user) location.href="login.html";

db.collection("products").orderBy("time","desc").onSnapshot(s=>{
 products.innerHTML="";
 s.forEach(d=>{
  let p=d.data();
  products.innerHTML+=`
  <div class="card">
    <img src="${p.imageUrl}">
    <h3>${p.name}</h3>
    <div class="price">â‚¹${p.price} <small>MRP â‚¹${p.mrp}</small></div>
    <button onclick='addCart(${JSON.stringify(p)})'>Add to Cart</button>
    <button onclick="share('${p.name}')">Share</button>
  </div>`;
 });
});

function addCart(p){
 let cart=JSON.parse(localStorage.getItem("cart")||"[]");
 cart.push(p);
 localStorage.setItem("cart",JSON.stringify(cart));
 alert("Added to cart");
}

function share(name){
 navigator.share({title:name,text:name});
}
</script>

</body>
</html>
